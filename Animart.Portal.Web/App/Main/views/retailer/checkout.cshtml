<ngcart-cart></ngcart-cart>
<script type="text/ng-template" id="template/ngCart/cart.html">
    <div class="alert alert-warning" role="alert" ng-show="ngCart.getTotalItems() === 0">
        Your cart is empty
    </div>
    <div class="table-responsive col-lg-12" ng-show="ngCart.getTotalItems() > 0">
        <table class="table table-striped ngCart cart">
            <thead>
                <tr>
                    <th></th>
                    <th></th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tfoot>
                @*<tr ng-show="ngCart.getTax()">
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>Tax ({{ ngCart.getTaxRate() }}%):</td>
                        <td>{{ ngCart.getTax() | currency:"Rp." }}</td>
                    </tr>*@
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>Shipping:</td>
                    <td>{{ ngCart.getShipping() | currency:"Rp. "}}</td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>Total:</td>
                    <td>{{ ngCart.totalCost() | currency:"Rp." }}</td>
                </tr>
            </tfoot>
            <tbody>
                <tr ng-repeat="item in ngCart.getCart().items track by $index">
                    <td><span ng-click="ngCart.removeItemById(item.getId())" class="glyphicon glyphicon-remove"></span></td>

                    <td>{{ item.getName() }}</td>
                    <td>{{ item.getPrice() | currency:"Rp."}}</td>
                    <td>
                        <span class="fa fa-minus-circle" ng-class="{'disabled':item.getQuantity()==1}"
                              ng-click="item.setQuantity(-1, true)"></span>&nbsp;&nbsp;
                        {{ item.getQuantity() | number }}&nbsp;&nbsp;
                        <span class="fa fa-plus-circle" ng-click="item.setQuantity(1, true)"></span>
                    </td>                   
                    <td>{{ item.getTotal() | currency:"Rp."}}</td>

                </tr>
            </tbody>
        </table>
        <div ng-controller="app.views.retailer.checkout">
            <md-input-container class="md-block">
                <label>Items</label>
            </md-input-container>

            <md-input-container class="md-block">
                <label>Address</label>
                <input ng-model="po.address">
            </md-input-container>
            <div layout-gt-sm="row">
                <md-input-container class="md-block" flex-gt-sm>
                    <label>Province</label>
                    <input ng-model="po.province">
                </md-input-container>
                <md-input-container class="md-block" flex-gt-sm>
                    <label>City</label>
                    <md-select ng-model="po.city" ng-change="updateShippingPrice()">
                        <md-option ng-repeat="city in cities">
                            {{city.name}}
                        </md-option>
                    </md-select>
                </md-input-container>
                <md-input-container class="md-block" flex-gt-sm>
                    <label>Postal Code</label>
                    <input name="postalCode" ng-model="po.postalCode" placeholder="12345"
                           required ng-pattern="/^[0-9]{5}$/" md-maxlength="5">
                    <div ng-messages="poForm.postalCode.$error" role="alert" multiple>
                        <div ng-message="required" class="my-message">You must supply a postal code.</div>
                        <div ng-message="pattern" class="my-message">
                            That doesn't look like a valid postal
                            code.
                        </div>
                    </div>
                </md-input-container>
            </div>
            <div layout-gt-sm="row">
                <md-input-container class="md-block" flex-gt-sm>
                    <label>Expedition</label>
                    <md-select ng-model="po.expedition" ng-change="updateShippingPrice()">
                        <md-option ng-repeat="expedition in expeditions">
                            {{expedition.expedition}} ({{expedition.type}}) - {{expedition.nextKilo}}
                        </md-option>
                    </md-select>
                </md-input-container>
            </div>
            <h2><a href="./#/hwto"><u>How to Pay</u></a></h2>
            <a href="" class="btn btn-primary" ng-click="placeOrder()">Order Now</a>
        </div>
    </div>
   
</script>